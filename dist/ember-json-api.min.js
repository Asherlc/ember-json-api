define("json-api-adapter",["exports"],function(e){"use strict";function t(e,t,r){this.status=e,this.message=t,this.xhr=r,this.stack=(new Error).stack}var r=Ember.get;DS._routes=Ember.create(null),DS.JsonApiAdapter=DS.RESTAdapter.extend({defaultSerializer:"DS/jsonApi",getRelationshipRoute:function(e,t,i){var n=i?r(i,"store").serializerFor(e):null;return n&&n.buildRelationshipKey?DS._routes[n.buildRelationshipKey(i.constructor.typeKey,i.id,e,t)]||DS._routes[n.buildRelationshipKey(i.type,null,e,null)]||DS._routes[n.buildRelationshipKey(null,null,e,t)]||DS._routes[n.buildRelationshipKey(null,null,e,null)]:null},getRelatedResourceRoute:function(e,t,i){var n=t?e+"."+t:e,s=i?r(i,"store").serializerFor(e):null,a=null;return s&&s.buildRelatedKey&&(a=DS._routes[s.buildRelatedKey(i.constructor.typeKey,i.id,e,t)]||DS._routes[s.buildRelatedKey(i.type,null,e,null)]||DS._routes[s.buildRelatedKey(null,null,e,t)]||DS._routes[s.buildRelatedKey(null,null,e,null)]),a||DS._routes[n]||DS._routes[e]},getRoute:function(e,t,r){var i;return r&&(i=this.getRelationshipRoute(e,t,r))?i:this.getRelatedResourceRoute(e,t,r)},buildURL:function(e,t,i){var n=this.getRoute(e,t,i);if(!n)return this._super(e,t,i);var s=[],a=r(this,"host"),l=this.urlPrefix(),o=/\{(.*?)\}/g;return s.push(t?o.test(n)?n.replace(o,t):n:n.replace(o,"")),l&&s.unshift(l),s=s.join("/"),!a&&s&&(s="/"+s),s},findBelongsTo:function(e,t,r,i){var n=t[i.key];if(!n)return this.ajax(r,"GET")},findMany:function(e,t,r,i){var n=r?r.join(","):null;return this.ajax(this.buildURL(t,n,i),"GET")},createRecord:function(e,t,r){var i=this._serializeData(e,t,r);return this.ajax(this.buildURL(t.typeKey),"POST",{data:i})},updateRecord:function(e,t,i){var n=this._serializeData(e,t,i),s=r(i,"id");return this.ajax(this.buildURL(t.typeKey,s,i),"PUT",{data:n})},_serializeData:function(e,t,r){var i=e.serializerFor(t.typeKey),n=r._createSnapshot(),s=Ember.String.pluralize(t.typeKey),a={};return a.data=i.serialize(n,{includeId:!0}),a.data.hasOwnProperty("type")||(a.data.type=s),a},_tryParseErrorResponse:function(e){try{return Ember.$.parseJSON(e)}catch(t){return"Something went wrong"}},ajaxError:function(e){var r,i=this._super(e);if(e&&"object"==typeof e){r=this._tryParseErrorResponse(e.responseText);var n={};return r&&"object"==typeof r&&void 0!==r.errors&&Ember.A(Ember.keys(r.errors)).forEach(function(e){n[Ember.String.camelize(e)]=r.errors[e]}),422===e.status?new DS.InvalidError(n):new t(e.status,r,e)}return i},pathForType:function(e){var t=Ember.String.decamelize(e);return Ember.String.pluralize(t).replace(/_/g,"-")}}),t.prototype=Ember.create(Error.prototype),t.constructor=t,DS.JsonApiAdapter.ServerError=t,e["default"]=DS.JsonApiAdapter}),define("json-api-serializer",["exports"],function(e){"use strict";function t(e,t,r){var i=r;return i&&(i={id:i,type:Ember.String.pluralize(t)}),i}function r(e,t,r,i){var n=r.hasMany(i).mapBy("id");return n&&(n={ids:n,type:Ember.String.pluralize(t)}),n}function i(e){var t=e;return"http"===t.substr(0,4).toLowerCase()&&(t=t.split("//").pop().split("/").slice(1).join("/")),"/"===t.charAt(0)&&(t=t.substr(1)),t}var n=Ember.get,s=Ember.isNone;DS.JsonApiSerializer=DS.RESTSerializer.extend({primaryRecordKey:"data",sideloadedRecordsKey:"included",relationshipKey:"self",relatedResourceKey:"related",keyForRelationship:function(e){return e},normalize:function(e,t,r){var i={};for(var n in t)if("links"!==n){var s=Ember.String.camelize(n);i[s]=t[n]}else i[n]=t[n];return this._super(e,i,r)},normalizePayload:function(e){if(e){var t=e[this.primaryRecordKey];return t&&(Ember.isArray(t)?this.extractArrayData(t,e):this.extractSingleData(t,e),delete e[this.primaryRecordKey]),e.meta&&(this.extractMeta(e.meta),delete e.meta),e.links&&(this.extractRelationships(e.links,e),delete t.links),e[this.sideloadedRecordsKey]&&(this.extractSideloaded(e[this.sideloadedRecordsKey]),delete e[this.sideloadedRecordsKey]),e}},extractSingleData:function(e,t){e.links&&this.extractRelationships(e.links,e),t[e.type]=e,delete e.type},extractArrayData:function(e,t){var r=e.length>0?e[0].type:null,i=this;e.forEach(function(e){e.links&&i.extractRelationships(e.links,e)}),t[r]=e},extractSideloaded:function(e){var t=n(this,"store"),r={};e.forEach(function(e){var t=e.type;delete e.type,r[t]||(r[t]=[]),r[t].push(e)}),this.pushPayload(t,r)},extractRelationships:function(e,t){var r,n,s,a,l,o,u,p,d,h=[];delete t.links;for(r in e)n=e[r],r=Ember.String.camelize(r.split(".").pop()),n&&("string"==typeof n?(n.indexOf("/")>-1?(a=n,s=null):(a=null,s=n),l=null):(a=n[this.relatedResourceKey]||n[this.relationshipKey],s=n.id||n.ids,l=n[this.relationshipKey]),a&&(t.links||(t.links={}),t.links[r]=this.removeHost(a),d={},p=a.indexOf("{")>-1,u=this.buildRelatedKey(t.type,p?null:t.id,r,p?null:s),o=i(a),DS._routes[u]=o,d[u]=o,l&&(u=this.buildRelationshipKey(u),o=i(l),DS._routes[u]=o,d[u]=o),h.push(d)),s&&(t[r]=s));return h},removeHost:function(e){return"/"+i(e)},buildRelatedKey:function(e,t,r,i){var n=[];return e&&(n.push(Ember.String.pluralize(e)),t&&n.push(t)),n.push(r),i&&n.push(i),n.join(".")},buildRelationshipKey:function(e,t,r,i){var n=1===arguments.length?arguments[0]:this.buildRelatedKey(e,t,r,i);return n+"--"+this.relationshipKey},serializeIntoHash:function(e,t,r,i){var n=Ember.String.pluralize(t.typeKey),s=this.serialize(r,i);s.hasOwnProperty("type")||(s.type=n),e[t.typeKey]=s},serializeBelongsTo:function(e,r,i){var a=i.key,l=e.belongsTo(a),o=this.keyForRelationship(i.type.typeKey),u=this.keyForRelationship(a);s(l)||(r.links=r.links||{},r.links[u]=t(u,o,n(l,"id")))},serializeHasMany:function(e,t,i){var n=i.key,s=this.keyForRelationship(i.type.typeKey),a=this.keyForRelationship(n);"hasMany"===i.kind&&(t.links=t.links||{},t.links[a]=r(a,s,e,n))}}),e["default"]=DS.JsonApiSerializer});
